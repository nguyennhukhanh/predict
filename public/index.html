<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Crypto Price Predictor</title>
    <meta
      name="description"
      content="Predict cryptocurrency prices using advanced analytics and machine learning."
    />
    <meta
      name="keywords"
      content="crypto, cryptocurrency, price prediction, machine learning, analytics"
    />
    <meta
      property="og:image"
      content="https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/6e75e786-add4-4040-a3ff-1549360e86c8/dekwaen-cdd95a7e-97f6-448d-8a37-4cb45fd8316d.jpg/v1/fill/w_1103,h_725,q_70,strp/crypto_mythology_by_ppp597_dekwaen-pre.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9ODQxIiwicGF0aCI6IlwvZlwvNmU3NWU3ODYtYWRkNC00MDQwLWEzZmYtMTU0OTM2MGU4NmM4XC9kZWt3YWVuLWNkZDk1YTdlLTk3ZjYtNDQ4ZC04YTM3LTRjYjQ1ZmQ4MzE2ZC5qcGciLCJ3aWR0aCI6Ijw9MTI4MCJ9XV0sImF1ZCI6WyJ1cm46c2VydmljZTppbWFnZS5vcGVyYXRpb25zIl19.H07bfXrVB7ZzfTvysDiPTgZ7T-xyN2SRui1vxivm6lI"
    />
    <meta property="og:title" content="Crypto Price Predictor" />
    <meta
      property="og:description"
      content="Predict cryptocurrency prices using advanced analytics and machine learning."
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://crypto.phimmoi1s.org/" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Crypto Price Predictor" />
    <meta
      name="twitter:description"
      content="Predict cryptocurrency prices using advanced analytics and machine learning."
    />
    <meta
      name="twitter:image"
      content="https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/6e75e786-add4-4040-a3ff-1549360e86c8/dekwaen-cdd95a7e-97f6-448d-8a37-4cb45fd8316d.jpg/v1/fill/w_1103,h_725,q_70,strp/crypto_mythology_by_ppp597_dekwaen-pre.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9ODQxIiwicGF0aCI6IlwvZlwvNmU3NWU3ODYtYWRkNC00MDQwLWEzZmYtMTU0OTM2MGU4NmM4XC9kZWt3YWVuLWNkZDk1YTdlLTk3ZjYtNDQ4ZC04YTM3LTRjYjQ1ZmQ4MzE2ZC5qcGciLCJ3aWR0aCI6Ijw9MTI4MCJ9XV0sImF1ZCI6WyJ1cm46c2VydmljZTppbWFnZS5vcGVyYXRpb25zIl19.H07bfXrVB7ZzfTvysDiPTgZ7T-xyN2SRui1vxivm6lI"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <style>
      .chart-container {
        min-height: 400px;
      }
    </style>
  </head>
  <body class="bg-gray-900 text-white">
    <div class="container mx-auto px-4 py-8">
      <h1 class="text-3xl font-bold mb-8">Crypto Price Predictor</h1>

      <!-- Form Controls -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
        <div>
          <label class="block text-sm font-medium mb-2">Symbol</label>
          <input
            type="text"
            id="symbol"
            value="BTCUSDT"
            class="w-full p-2 rounded bg-gray-800 border border-gray-700"
          />
        </div>
        <div>
          <label class="block text-sm font-medium mb-2">Interval</label>
          <select
            id="interval"
            class="w-full p-2 rounded bg-gray-800 border border-gray-700"
          >
            <option value="1m" selected>1 minute</option>
            <option value="3m">3 minutes</option>
            <option value="5m">5 minutes</option>
            <option value="15m">15 minutes</option>
            <option value="30m">30 minutes</option>
            <option value="1h">1 hour</option>
            <option value="2h">2 hours</option>
            <option value="4h">4 hours</option>
            <option value="6h">6 hours</option>
            <option value="8h">8 hours</option>
            <option value="12h">12 hours</option>
            <option value="1d">1 day</option>
            <option value="3d">3 days</option>
            <option value="1w">1 week</option>
            <option value="1M">1 month</option>
          </select>
        </div>
        <div class="flex items-end">
          <button
            id="predict"
            class="w-full p-2 bg-blue-600 rounded hover:bg-blue-700"
          >
            Predict
          </button>
        </div>
      </div>

      <!-- Charts -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <div class="bg-gray-800 p-4 rounded-lg">
          <h2 class="text-xl font-semibold mb-4">Price Analysis</h2>
          <div id="priceChart" class="chart-container"></div>
        </div>
        <div class="bg-gray-800 p-4 rounded-lg">
          <h2 class="text-xl font-semibold mb-4">Technical Indicators</h2>
          <div id="indicatorChart" class="chart-container"></div>
        </div>
      </div>

      <!-- Advanced Analytics -->
      <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-8">
        <div class="bg-gray-800 p-4 rounded-lg">
          <h2 class="text-xl font-semibold mb-4">Market Analysis</h2>
          <div id="marketData" class="grid grid-cols-2 gap-4">
            <!-- Market data will be inserted here -->
          </div>
        </div>
        <div class="bg-gray-800 p-4 rounded-lg">
          <h2 class="text-xl font-semibold mb-4">Technical Analysis</h2>
          <div id="technicalData" class="grid grid-cols-2 gap-4">
            <!-- Technical data will be inserted here -->
          </div>
        </div>
      </div>

      <!-- Prediction Results -->
      <div id="results" class="mt-8 bg-gray-800 p-4 rounded-lg">
        <h2 class="text-xl font-semibold mb-4">Prediction Results</h2>
        <div id="predictionData" class="grid grid-cols-2 md:grid-cols-4 gap-4">
          <!-- Results will be inserted here -->
        </div>
        <div id="predictionDescription" class="mt-4 p-4 bg-gray-700 rounded">
          <!-- Prediction description will be inserted here -->
        </div>
      </div>
    </div>

    <script>
      let priceChart, indicatorChart;

      // Initialize charts
      function initCharts() {
        const chartOptions = {
          chart: {
            type: "line",
            animations: {
              enabled: false,
            },
            foreColor: "#fff",
            background: "transparent",
            toolbar: {
              show: true,
              tools: {
                download: true,
                selection: true,
                zoom: true,
                zoomin: true,
                zoomout: true,
                pan: true,
                reset: true,
              },
            },
          },
          stroke: {
            curve: "smooth",
            width: 2,
          },
          grid: {
            borderColor: "#404040",
          },
          tooltip: {
            theme: "dark",
            x: {
              format: "dd MMM yyyy HH:mm",
            },
          },
          xaxis: {
            type: "datetime",
            labels: {
              datetimeUTC: false,
            },
          },
          yaxis: {
            labels: {
              formatter: (value) => formatNumber(value),
            },
          },
        };

        priceChart = new ApexCharts(document.querySelector("#priceChart"), {
          ...chartOptions,
          series: [
            {
              name: "Price",
              data: [],
            },
            {
              name: "Predicted",
              data: [],
            },
          ],
        });

        indicatorChart = new ApexCharts(
          document.querySelector("#indicatorChart"),
          {
            ...chartOptions,
            series: [
              {
                name: "RSI",
                data: [],
              },
              {
                name: "Momentum",
                data: [],
              },
              {
                name: "Volatility",
                data: [],
              },
            ],
          }
        );

        priceChart.render();
        indicatorChart.render();
      }

      function updateCharts(data) {
        try {
          // Format gi√° th√†nh m·∫£ng d·ªØ li·ªáu cho bi·ªÉu ƒë·ªì
          const priceData = data.timestamps.map((timestamp, i) => ({
            x: new Date(Number(timestamp)),
            y: Number(data.prices[i]), // S·ª≠ d·ª•ng m·∫£ng prices thay v√¨ gi√° ƒë∆°n l·∫ª
          }));

          // T√≠nh to√°n ƒëi·ªÉm cu·ªëi cho ƒë∆∞·ªùng d·ª± ƒëo√°n
          const lastPoint = priceData[priceData.length - 1];
          const predictionPoints = [
            lastPoint,
            {
              x: new Date(lastPoint.x.getTime() + 3600000), // 1 gi·ªù sau
              y: Number(data.predictedPrice),
            },
          ];

          // C·∫≠p nh·∫≠t bi·ªÉu ƒë·ªì gi√°
          priceChart.updateOptions({
            chart: {
              height: 400,
              animations: {
                enabled: false,
              },
            },
            stroke: {
              width: [2, 2],
              dashArray: [0, 5],
            },
            colors: ["#00E396", "#FEB019"],
            xaxis: {
              type: "datetime",
              labels: {
                datetimeUTC: false,
                style: {
                  colors: "#fff",
                },
              },
            },
            yaxis: {
              labels: {
                style: {
                  colors: "#fff",
                },
                formatter: (value) => formatNumber(value, data.symbol),
              },
              tickAmount: 6,
            },
            tooltip: {
              theme: "dark",
              x: {
                format: "dd MMM yyyy HH:mm",
              },
            },
            grid: {
              borderColor: "#90A4AE30",
              row: {
                colors: ["transparent", "transparent"],
              },
            },
            legend: {
              labels: {
                colors: "#fff",
              },
            },
          });

          priceChart.updateSeries([
            {
              name: "Historical Price",
              data: priceData,
            },
            {
              name: "Prediction",
              data: predictionPoints,
            },
          ]);

          // C·∫≠p nh·∫≠t bi·ªÉu ƒë·ªì ch·ªâ b√°o k·ªπ thu·∫≠t
          const technicalData = data.timestamps
            .slice(-30)
            .map((timestamp, i) => ({
              x: new Date(Number(timestamp)),
              RSI: data.analytics.technical.rsi,
              Momentum: data.analytics.momentum,
              Trend: data.analytics.trend,
            }));

          indicatorChart.updateOptions({
            chart: {
              height: 400,
              animations: {
                enabled: false,
              },
            },
            stroke: {
              width: [2, 2, 2],
              curve: "smooth",
            },
            colors: ["#00E396", "#008FFB", "#FEB019"],
            xaxis: {
              type: "datetime",
              labels: {
                datetimeUTC: false,
                style: {
                  colors: "#fff",
                },
              },
            },
            yaxis: [
              {
                title: {
                  text: "RSI",
                  style: {
                    color: "#00E396",
                  },
                },
                min: 0,
                max: 100,
                labels: {
                  style: {
                    colors: "#fff",
                  },
                },
              },
              {
                title: {
                  text: "Momentum/Trend",
                  style: {
                    color: "#008FFB",
                  },
                },
                min: -100,
                max: 100,
                opposite: true,
                labels: {
                  style: {
                    colors: "#fff",
                  },
                },
              },
            ],
            tooltip: {
              theme: "dark",
              x: {
                format: "dd MMM yyyy HH:mm",
              },
            },
            grid: {
              borderColor: "#90A4AE30",
            },
            legend: {
              labels: {
                colors: "#fff",
              },
            },
          });

          indicatorChart.updateSeries([
            {
              name: "RSI",
              type: "line",
              data: technicalData.map((d) => ({
                x: d.x,
                y: d.RSI,
              })),
            },
            {
              name: "Momentum",
              type: "line",
              data: technicalData.map((d) => ({
                x: d.x,
                y: d.Momentum,
              })),
            },
            {
              name: "Trend",
              type: "line",
              data: technicalData.map((d) => ({
                x: d.x,
                y: d.Trend,
              })),
            },
          ]);
        } catch (error) {
          console.error("Error updating charts:", error);
        }
      }

      function formatNumber(num, symbol) {
        if (!num) return "0";

        // X·ª≠ l√Ω hi·ªÉn th·ªã theo lo·∫°i coin
        if (symbol.includes("SHIB") || symbol.includes("DOGE") || num < 0.01) {
          return num.toPrecision(8);
        } else if (num < 1) {
          return num.toPrecision(6);
        } else if (num < 100) {
          return num.toPrecision(8);
        } else {
          return num.toPrecision(10);
        }
      }

      function updateAnalytics(data) {
        // Update market analysis
        document.getElementById("marketData").innerHTML = `
                <div class="p-4 bg-gray-700 rounded">
                    <div class="text-sm text-gray-400">Current Price</div>
                    <div class="text-lg">${formatNumber(
                      data.currentPrice,
                      data.symbol
                    )}</div>
                </div>
                <div class="p-4 bg-gray-700 rounded">
                    <div class="text-sm text-gray-400">Predicted Price</div>
                    <div class="text-lg">${formatNumber(
                      data.predictedPrice,
                      data.symbol
                    )}</div>
                </div>
                <div class="p-4 bg-gray-700 rounded">
                    <div class="text-sm text-gray-400">Market Pattern</div>
                    <div class="text-md">${data.pattern}</div>
                </div>
                <div class="p-4 bg-gray-700 rounded">
                    <div class="text-sm text-gray-400">Trend</div>
                    <div class="text-md">${data.trend}</div>
                </div>
            `;

        // Update technical analysis
        document.getElementById("technicalData").innerHTML = `
                <div class="p-4 bg-gray-700 rounded">
                    <div class="text-sm text-gray-400">RSI</div>
                    <div class="text-lg">${data.analytics.technical.rsi.toFixed(
                      2
                    )}</div>
                </div>
                <div class="p-4 bg-gray-700 rounded">
                    <div class="text-sm text-gray-400">Momentum</div>
                    <div class="text-lg">${data.analytics.momentum.toFixed(
                      2
                    )}%</div>
                </div>
                <div class="p-4 bg-gray-700 rounded">
                    <div class="text-sm text-gray-400">Volatility</div>
                    <div class="text-lg">${data.analytics.volatility.toFixed(
                      2
                    )}%</div>
                </div>
                <div class="p-4 bg-gray-700 rounded">
                    <div class="text-sm text-gray-400">Confidence</div>
                    <div class="text-lg">${data.confidence.toFixed(2)}%</div>
                </div>
            `;

        // Update prediction results
        document.getElementById("predictionData").innerHTML = `
          <div class="p-4 bg-gray-700 rounded">
              <div class="text-sm text-gray-400">Price Movement</div>
              <div class="text-lg ${
                data.predictedPrice > data.currentPrice
                  ? "text-green-400"
                  : "text-red-400"
              }">
                  ${(
                    ((data.predictedPrice - data.currentPrice) /
                      data.currentPrice) *
                    100
                  ).toFixed(2)}%
              </div>
              <div class="text-xs text-gray-500">Expected Change</div>
          </div>
          <div class="p-4 bg-gray-700 rounded">
              <div class="text-sm text-gray-400">Confidence Score</div>
              <div class="text-lg">${data.confidence.toFixed(2)}%</div>
              <div class="text-xs text-gray-500">Prediction Accuracy</div>
          </div>
          <div class="p-4 bg-gray-700 rounded">
              <div class="text-sm text-gray-400">Time Frame</div>
              <div class="text-lg">${
                document.getElementById("interval").value
              }</div>
              <div class="text-xs text-gray-500">Analysis Period</div>
          </div>
          <div class="p-4 bg-gray-700 rounded">
              <div class="text-sm text-gray-400">Risk Level</div>
              <div class="text-lg">
                  ${
                    data.analytics.volatility > 50
                      ? "High"
                      : data.analytics.volatility > 30
                      ? "Medium"
                      : "Low"
                  }
              </div>
              <div class="text-xs text-gray-500">Based on Volatility</div>
          </div>
          <div class="p-4 bg-gray-700 rounded">
              <div class="text-sm text-gray-400">Signal Strength</div>
              <div class="text-lg">${data.score.toFixed(2)}%</div>
              <div class="text-xs text-gray-500">Trading Signal</div>
          </div>
          <div class="p-4 bg-gray-700 rounded">
              <div class="text-sm text-gray-400">Volume Profile</div>
              <div class="text-lg">${data.analytics.pattern.strength.toFixed(
                2
              )}%</div>
              <div class="text-xs text-gray-500">Market Participation</div>
          </div>
          <div class="p-4 bg-gray-700 rounded">
              <div class="text-sm text-gray-400">Market Sentiment</div>
              <div class="text-md ${
                data.trend.includes("BULLISH")
                  ? "text-green-400"
                  : data.trend.includes("BEARISH")
                  ? "text-red-400"
                  : "text-yellow-400"
              }">
                  ${data.trend}
              </div>
              <div class="text-xs text-gray-500">Overall Direction</div>
          </div>
          <div class="p-4 bg-gray-700 rounded">
              <div class="text-sm text-gray-400">Pattern Recognition</div>
              <div class="text-md">${data.pattern}</div>
              <div class="text-xs text-gray-500">Market Structure</div>
          </div>
        `;

        // Update prediction description
        const description = generatePredictionDescription(data);
        document.getElementById("predictionDescription").innerHTML = `
          <div class="text-sm text-gray-400">Prediction Description</div>
          <div class="text-md">${description}</div>
        `;

        // Highlight significant changes
        const priceChange =
          ((data.predictedPrice - data.currentPrice) / data.currentPrice) * 100;
        if (Math.abs(priceChange) > 5) {
          document
            .getElementById("predictionData")
            .firstElementChild.classList.add("animate-pulse");
        }
      }

      function generatePredictionDescription(data) {
        const priceChange =
          ((data.predictedPrice - data.currentPrice) / data.currentPrice) * 100;
        let description = "";

        // Ph√¢n t√≠ch t·ªïng quan th·ªã tr∆∞·ªùng
        description += `<strong>Ph√¢n t√≠ch t·ªïng quan:</strong><br>`;
        description += `‚Ä¢ ${
          data.symbol
        } hi·ªán ƒëang giao d·ªãch ·ªü m·ª©c ${data.currentPrice.toFixed(2)} USD${
          data.trend.includes("BULLISH")
            ? ", ƒëang trong xu h∆∞·ªõng tƒÉng"
            : data.trend.includes("BEARISH")
            ? ", ƒëang trong xu h∆∞·ªõng gi·∫£m"
            : ", ƒëang trong giai ƒëo·∫°n t√≠ch l≈©y"
        }<br>`;
        description += `‚Ä¢ D·ª± b√°o gi√°: ${data.predictedPrice.toFixed(2)} USD (${
          priceChange > 0 ? "+" : ""
        }${priceChange.toFixed(2)}%) trong ${
          document.getElementById("interval").value
        } t·ªõi<br>`;
        description += `‚Ä¢ ƒê·ªô tin c·∫≠y: ${data.confidence.toFixed(2)}% - ${
          data.confidence > 75
            ? "T√≠n hi·ªáu r·∫•t m·∫°nh"
            : data.confidence > 60
            ? "T√≠n hi·ªáu ƒë√°ng tin c·∫≠y"
            : data.confidence > 45
            ? "C·∫ßn th√™m x√°c nh·∫≠n"
            : "T√≠n hi·ªáu y·∫øu"
        }<br><br>`;

        // Ph√¢n t√≠ch k·ªπ thu·∫≠t chuy√™n s√¢u
        description += `<strong>Ph√¢n t√≠ch ch·ªâ b√°o k·ªπ thu·∫≠t:</strong><br><br>`;

        // 1. Ph√¢n t√≠ch RSI (Relative Strength Index - Ch·ªâ b√°o s·ª©c m·∫°nh t∆∞∆°ng ƒë·ªëi)
        description += `<strong>1. Ch·ªâ b√°o RSI (${data.analytics.technical.rsi.toFixed(
          2
        )}):</strong><br>`;
        description += `‚Ä¢ √ù nghƒ©a: ƒêo l∆∞·ªùng t·ªëc ƒë·ªô v√† m·ª©c ƒë·ªô thay ƒë·ªïi gi√°, x√°c ƒë·ªãnh v√πng qu√° mua/qu√° b√°n<br>`;
        description += `‚Ä¢ Ph√¢n t√≠ch: ${
          data.analytics.technical.rsi > 80
            ? "V√ôNG QU√Å MUA M·∫†NH (>80) - R·ªßi ro ƒëi·ªÅu ch·ªânh gi·∫£m r·∫•t cao, n√™n ch·ªët l·ªùi d·∫ßn"
            : data.analytics.technical.rsi > 70
            ? "V√ôNG QU√Å MUA (>70) - C·∫£nh b√°o kh·∫£ nƒÉng ƒëi·ªÅu ch·ªânh, c√¢n nh·∫Øc ch·ªët l·ªùi"
            : data.analytics.technical.rsi < 20
            ? "V√ôNG QU√Å B√ÅN M·∫†NH (<20) - C∆° h·ªôi t√≠ch l≈©y t·ªët, c√≥ th·ªÉ xu·∫•t hi·ªán ƒë√°y"
            : data.analytics.technical.rsi < 30
            ? "V√ôNG QU√Å B√ÅN (<30) - V√πng t√≠ch l≈©y ti·ªÅm nƒÉng, c√¢n nh·∫Øc mua v√†o"
            : data.analytics.technical.rsi > 60
            ? "V√ôNG TƒÇNG ƒêI·ªÇM (>60) - ƒê·ªông l∆∞·ª£ng tƒÉng ƒëang m·∫°nh, xu h∆∞·ªõng t√≠ch c·ª±c"
            : data.analytics.technical.rsi < 40
            ? "V√ôNG GI·∫¢M ƒêI·ªÇM (<40) - ƒê·ªông l∆∞·ª£ng gi·∫£m ƒëang m·∫°nh, th·∫≠n tr·ªçng"
            : "V√ôNG TRUNG T√çNH (40-60) - Th·ªã tr∆∞·ªùng ƒëang c√¢n b·∫±ng, ch·ªù t√≠n hi·ªáu breakout"
        }<br><br>`;

        // 2. Ph√¢n t√≠ch MACD (Moving Average Convergence Divergence)
        const macd = data.analytics.technical.macd;
        description += `<strong>2. Ch·ªâ b√°o MACD:</strong><br>`;
        description += `‚Ä¢ √ù nghƒ©a: K·∫øt h·ª£p c√°c ƒë∆∞·ªùng trung b√¨nh ƒë·ªông ƒë·ªÉ x√°c ƒë·ªãnh xu h∆∞·ªõng v√† ƒëi·ªÉm chuy·ªÉn xu h∆∞·ªõng<br>`;
        description += `‚Ä¢ Th√¥ng s·ªë: MACD (${macd.macd.toFixed(
          2
        )}) | Signal (${macd.signal.toFixed(
          2
        )}) | Histogram (${macd.histogram.toFixed(2)})<br>`;
        description += `‚Ä¢ Ph√¢n t√≠ch: ${
          macd.histogram > 0 && macd.macd > macd.signal
            ? "T√çCH C·ª∞C M·∫†NH - MACD v∆∞·ª£t Signal v√† Histogram d∆∞∆°ng, x√°c nh·∫≠n xu h∆∞·ªõng tƒÉng ƒëang m·∫°nh"
            : macd.histogram > 0
            ? "T√çCH C·ª∞C - Histogram d∆∞∆°ng cho th·∫•y ƒë·ªông l∆∞·ª£ng tƒÉng ƒëang chi·∫øm ∆∞u th·∫ø"
            : macd.histogram < 0 && macd.macd < macd.signal
            ? "TI√äU C·ª∞C M·∫†NH - MACD d∆∞·ªõi Signal v√† Histogram √¢m, x√°c nh·∫≠n xu h∆∞·ªõng gi·∫£m ƒëang m·∫°nh"
            : "TI√äU C·ª∞C - Histogram √¢m cho th·∫•y ƒë·ªông l∆∞·ª£ng gi·∫£m ƒëang chi·∫øm ∆∞u th·∫ø"
        }<br><br>`;

        // 3. Ph√¢n t√≠ch Momentum (ƒê·ªông l∆∞·ª£ng)
        description += `<strong>3. Ch·ªâ b√°o Momentum (${data.analytics.momentum.toFixed(
          2
        )}%):</strong><br>`;
        description += `‚Ä¢ √ù nghƒ©a: ƒêo l∆∞·ªùng t·ªëc ƒë·ªô thay ƒë·ªïi gi√°, x√°c ƒë·ªãnh ƒë·ªô m·∫°nh c·ªßa xu h∆∞·ªõng<br>`;
        description += `‚Ä¢ Ph√¢n t√≠ch: ${
          Math.abs(data.analytics.momentum) > 50
            ? "ƒê·ªòNG L∆Ø·ª¢NG C·ª∞C M·∫†NH (>50%) - Xu h∆∞·ªõng ƒëang r·∫•t m·∫°nh v√† c√≥ th·ªÉ ti·∫øp t·ª•c"
            : Math.abs(data.analytics.momentum) > 30
            ? "ƒê·ªòNG L∆Ø·ª¢NG M·∫†NH (30-50%) - Xu h∆∞·ªõng ƒëang c√≥ ƒë·ªô tin c·∫≠y cao"
            : Math.abs(data.analytics.momentum) > 15
            ? "ƒê·ªòNG L∆Ø·ª¢NG TRUNG B√åNH (15-30%) - Xu h∆∞·ªõng ƒëang ph√°t tri·ªÉn"
            : "ƒê·ªòNG L∆Ø·ª¢NG Y·∫æU (<15%) - Xu h∆∞·ªõng kh√¥ng r√µ r√†ng ho·∫∑c ƒëang suy y·∫øu"
        }<br>`;
        description += `‚Ä¢ H∆∞·ªõng xu h∆∞·ªõng: ${
          data.analytics.momentum > 0
            ? "üîº TƒÇNG - ƒê·ªông l∆∞·ª£ng tƒÉng ƒëi·ªÉm ƒëang chi·∫øm ∆∞u th·∫ø"
            : "üîΩ GI·∫¢M - ƒê·ªông l∆∞·ª£ng gi·∫£m ƒëi·ªÉm ƒëang chi·∫øm ∆∞u th·∫ø"
        }<br>`;

        // Ph√¢n t√≠ch m√¥ h√¨nh gi√°
        description += `<br><strong>Ph√¢n t√≠ch m√¥ h√¨nh gi√°:</strong><br>`;
        description += `‚Ä¢ M√¥ h√¨nh hi·ªán t·∫°i: ${
          data.pattern === "ACCUMULATION"
            ? "T√≠ch l≈©y - Giai ƒëo·∫°n h√¨nh th√†nh ƒë√°y"
            : data.pattern === "BREAKOUT_UP"
            ? "B·ª©t ph√° tƒÉng - C√≥ th·ªÉ b·∫Øt ƒë·∫ßu xu h∆∞·ªõng m·ªõi"
            : data.pattern === "BREAKOUT_DOWN"
            ? "B·ª©t ph√° gi·∫£m - C·∫£nh b√°o th·ªã tr∆∞·ªùng y·∫øu"
            : data.pattern === "CONSOLIDATION"
            ? "T√≠ch l≈©y ngang - Ch·ªù breakout"
            : "Ch∆∞a h√¨nh th√†nh m√¥ h√¨nh r√µ r√†ng"
        }<br>`;

        // Ph√¢n t√≠ch r·ªßi ro
        description += `<br><strong>ƒê√°nh gi√° r·ªßi ro:</strong><br>`;
        description += `‚Ä¢ ƒê·ªô bi·∫øn ƒë·ªông: ${data.analytics.volatility.toFixed(
          2
        )}% - ${
          data.analytics.volatility > 50
            ? "C·ª±c k·ª≥ cao, n√™n gi·∫£m margin"
            : data.analytics.volatility > 30
            ? "Cao, c√¢n nh·∫Øc gi·∫£m kh·ªëi l∆∞·ª£ng"
            : data.analytics.volatility > 15
            ? "Trung b√¨nh"
            : "Th·∫•p, c√≥ th·ªÉ tƒÉng kh·ªëi l∆∞·ª£ng"
        }<br>`;

        // Khuy·∫øn ngh·ªã giao d·ªãch
        description += `<br><strong>Khuy·∫øn ngh·ªã giao d·ªãch:</strong><br>`;
        description += `‚Ä¢ ${
          data.confidence > 70 && priceChange > 0
            ? "üíπ T√≠n hi·ªáu MUA m·∫°nh"
            : data.confidence > 70 && priceChange < 0
            ? "üîª T√≠n hi·ªáu B√ÅN m·∫°nh"
            : data.confidence > 50 && priceChange > 0
            ? "üìà C√≥ th·ªÉ MUA v·ªõi kh·ªëi l∆∞·ª£ng v·ª´a ph·∫£i"
            : data.confidence > 50 && priceChange < 0
            ? "üìâ C√≥ th·ªÉ B√ÅN v·ªõi kh·ªëi l∆∞·ª£ng v·ª´a ph·∫£i"
            : "‚öñÔ∏è N√™n ƒë·ª©ng ngo√†i th·ªã tr∆∞·ªùng v√† ch·ªù t√≠n hi·ªáu r√µ r√†ng h∆°n"
        }<br>`;

        // ƒêi·ªÉm c·∫ßn ch√∫ √Ω
        description += `‚Ä¢ ƒêi·ªÉm c·∫ßn ch√∫ √Ω: ${
          data.analytics.volatility > 40
            ? "N√™n ƒë·∫∑t stoploss ch·∫∑t ch·∫Ω do bi·∫øn ƒë·ªông cao"
            : data.analytics.technical.rsi > 70 ||
              data.analytics.technical.rsi < 30
            ? "Th·ªã tr∆∞·ªùng ƒëang ·ªü v√πng c·ª±c ƒëoan"
            : data.confidence < 50
            ? "T√≠n hi·ªáu ch∆∞a ƒë·ªß m·∫°nh, n√™n ch·ªù th√™m x√°c nh·∫≠n"
            : "C√≥ th·ªÉ giao d·ªãch theo trend v·ªõi qu·∫£n l√Ω r·ªßi ro ph√π h·ª£p"
        }`;

        return description;
      }

      async function updatePrediction() {
        const symbol = document.getElementById("symbol").value;
        const interval = document.getElementById("interval").value;

        try {
          const response = await fetch(
            `/api/predict?symbol=${symbol}&interval=${interval}`
          );
          const data = await response.json();

          if (data.error) {
            throw new Error(data.error);
          }

          updateCharts(data);
          updateAnalytics(data);
        } catch (error) {
          console.error("Prediction error:", error);
          alert("Error getting prediction: " + error.message);
        }
      }

      // Initialize
      document.addEventListener("DOMContentLoaded", () => {
        initCharts();
        document
          .getElementById("predict")
          .addEventListener("click", updatePrediction);
        updatePrediction(); // Initial prediction
      });
    </script>
  </body>
</html>
